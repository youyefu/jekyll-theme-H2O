---
layout: post
title: '国三网络技术笔记20-30'
excerpt:  20-30集
date: 2018-07-04
categories: 广电
tags: 国三 网络技术
---

# 第二十讲

## 第五章 局域网

### 虚拟局域网

VLAN virtual LAN 建立在交换技术的基础上，以**软件**的方法将网络中的节点按工作性质与需要，划分成若干个**逻辑工作组**，每个组就是一个虚拟网络

### 四种组网定义方法

·基于端口的

·基于mac地址的

·基于网络层地址定义的

·基于ip广播粗的

### 综合布线国际标准 ISO/IEC 11801





# 第二十一讲

### 集线器

使用CSMA/CD介质访问控制方法，共享一个冲突域

串接集线器可以监听链路中的数据包

不能同时发送数据，但可以同时接受数据 

### 网桥

特征：能互联两个采用不同数据链路层协议、不同传输介质、不同传输速率的网络

作用：构建和维护MAC地址表

缺陷：如没有mac地址表网桥无法确定帧是否要转发以及如何进行转发

### 生成树协议 STP

详见华为数通笔记

### 交换机

可以在多个端口之间建立并发连接



# 第二十二讲

## 第六章 交换机配置

![](http://p94dvrayw.bkt.clouddn.com/18-7-4/74509727.jpg)

![](http://p94dvrayw.bkt.clouddn.com/18-7-4/58261288.jpg)

![](http://p94dvrayw.bkt.clouddn.com/18-7-4/76765282.jpg)

### 交换表

包括目地mac地址 ，所对应的交换机端口号，以及所在的虚拟子网vlan

维护：每个记录有时间戳，到时间没有被更新就会被删除

中高端思科 交换表在cam中  show cam 

​	cisco-4xxx系列  show cam dynamic

​	cisco-3xxx系列 show mac-address-table



# 第二十三讲

### 交换机的交换结构

- 软件执行交换结构
  - 交换机接收到数据帧后，由串行代码转换位并行代码，找到对应的端口后建立虚连接，并把暂存在ram里的数据帧转化串行代码，发送目标端口，这些步骤都是有软件控制完成的
  - 串-并-串
- 矩阵交换结构
  - 查表后找到对应的端口后，打开交换矩阵相应开关，在俩端口建立连接
  - 优点速率快，延时小，缺点扩展可管理性差
- 总线交换结构
  - 数据帧按时隙在总线上传输
  - 对总线带宽要求较高
  - 设交换机端口为M，每个端口带宽为N，总线带宽位MxN
- 共享存储器交换结构
  - 共享存储RAM代替总线交换结构中的总线
  - 结构简单易于实现，单储存容量扩大时延时也越来越大，成本比较高，适合小型交换机

### 交换方式

最常采用的是动态交换方式，这种方式主要模式有

- 快速转发 碎片丢弃 存储转发
  - 快速转发，检测到数据帧时，一旦检测到6个字节，就立即转发，无法校验纠错即被直接转发
  - 存储转发，先存储后校验循环冗余码校验检查，对错误帧处理后再转发，延时大但有错误校验，能改善网络性能，且支持不同速度的端口间转发
  - 碎片丢弃交换模式，检查 冲突碎片，判断是否达到64字节，如小于，则是碎片

### VLAN

逻辑工作组，每个都是一个独立的逻辑网段和广播域，不受用户所在的物理位置和物理网段的限制，这个是通过软件完成的。

- 在数据链路层
- 广播信息只发送给该vlan 的节点
- 每个vlan都是一个独立的网络，各自有唯一不同的子网号，不同vlan之间只能通过第三层路由才能进行通信，不能直接完成通信。

### VLAN标识

vlan id 是12位二进制数

1-1000用于以太网，1002-1005是FDDI Token ring 1025-4096是扩展范围

vlan name 由32位字符表示 可以数字、字符 缺省vlan名 VLAN00111

### VLAN Trunk

VLAN中继 主线路上传输多个vlan 连接主干线的两个交换机要用trunk 



# 第二十四讲

随便讲了下stp和交换机配置



### 开启http server

catos : set ip http server enable

IOS: ip http server

### 设置主机名

catos:set system name xxx

IOS:hostname XXX

### 配置密码

IOS： 

enable password xxx 明文

enable password 7 xxx 加密

enable password 5 xxx 加密 md5加密

catos： set enablepass

### 远程登录口令设置

IOS：

（config）：line vty 0 4

（config-line）：password 0 zzz  明文

（config-line）：password 7 zzz  加密

CATos

set password



# 第二十五讲

### 系统时间

IOS：clock set 00：00：00 nov 2018

catos：set time Mon 07/03/18 12:11:11

### 管理地址

IOS：

int vlan 1

ip address 10.10.10.2 255.255.255.0

ip default-gateway 203.10.1.1

catos:

set interface sc0 10.10.10.3 255.255.255.0 10.10.10.255(最后的广播地址可选）

set ip route 0.0.0.0 203.10.1.1

### 更改端口描述

IOS：interface fastEthernet 0/24

description xxx

catos

set port name 1/2 xxx

### 打开 关闭端口

ios：

int fastEthernet 0/24

shutdown

no shutdown

catos

set port enable 0/1

set port disable 0/1



### VTP

这个是vlan的中继协议，第二层协议，用于管理同一个域的网络范围内vlan的建立删除和重命名，在vtp server上配置一个新的vlan时，该vlan的配置信息自动传播到本域内的所有其他交换机，其他交换机与vtpserver保持一致，减少配置同一个vlan的工作量，保持了vlan配置的一致性

### vtp模式

- 服务器模式 vtp server
  - 一个域里只能设定一个server
  - 可以建立删除修改vlan
- 客户端模式vtp client
- vtp transparent
  - 透明模式 不管其他的

IOS：vtp mode xxx

vtp domain zzz

catos：

set vtp mode

set vtp domain zzz



# 第二十六讲

### VLAN创建删除修改

vlanid 用12位组成 4096个vlan

1是缺省vlan 只能使用不能删除

![](http://p94dvrayw.bkt.clouddn.com/18-7-9/15038279.jpg)

![](http://p94dvrayw.bkt.clouddn.com/18-7-9/69162171.jpg)

![](http://p94dvrayw.bkt.clouddn.com/18-7-9/37176862.jpg)

### 配置VLAN Trunk

两种协议 isl 思科专有协议 ieee802.1q  dotoneq

![](http://p94dvrayw.bkt.clouddn.com/18-7-9/14593512.jpg)

![](http://p94dvrayw.bkt.clouddn.com/18-7-9/28155184.jpg)

### STP配置

![](http://p94dvrayw.bkt.clouddn.com/18-7-9/94401812.jpg)



![](http://p94dvrayw.bkt.clouddn.com/18-7-9/26383925.jpg)

生成树优先级取值范围0-61440 增量4096 值越小优先级越高

![](http://p94dvrayw.bkt.clouddn.com/18-7-9/45879141.jpg)



# 第二十七讲


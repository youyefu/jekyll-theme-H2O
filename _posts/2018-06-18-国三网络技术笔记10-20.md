---
layout: post
title: '国三网络技术笔记10-20'
excerpt:  10-20集
date: 2018-06-18
categories: 广电
tags: 国三 网络技术
---

# 第九讲下半部分补

## 第三章



![](http://p94dvrayw.bkt.clouddn.com/18-6-22/24309977.jpg)



### 无类域间路由 CIDR

超网技术 讲现有ip地址合并成较大的，具有更多主机地址的路由域

# 第十讲

![](http://p94dvrayw.bkt.clouddn.com/18-6-27/76709008.jpg)

前面的的叫前导码，固定，后面网络号可更改，确定了点分十进制的范围

### A类地址 

每个地址容纳主机个数为2的主机号次方（24）-2

网络号从0到127分成128块：

0.0.0.0-0.255.255.255 网络号=0

1.0.0.0-1.255.255.255 网络号=1

。。。

。。。

127.0.0.0-127.255.255.255 网络号=127

总共128块

其中，第一块和最后一块地址留作特殊用途

网络号id=10的 10.0.0.0-10.255.255.255用作专用地址

### B类地址

每个地址容纳主机个数为2的主机号次方（16）-2



### 特殊地址形式（会计算）

1、直接广播地址：

ABC三类地址如果主机号全是1，那这个主机号为直接广播地址，广播发送给特定网络上的所有主机。如要给201.161.20.0上的所有主机发送，广播地址为201.161.20.255 y因为这个是个C类地址，主机号是后8位，这8位都是1，得到广播地址255

2、受限广播地址：

本网广播所有主机 就是255.255.255.255 内部广播

3、这个网络上的特定主机地址：

向某个特定主机发送一个分组，就要用到这个地址，网络号全部为零，这样会限定在本网内部，由主机号对应相应的主机接收。如

![](http://p94dvrayw.bkt.clouddn.com/18-6-27/80282308.jpg)

4、回送地址：

127.0.0.1 测试本地环路

### 子网

subnet 允许将网络划分成多个网络供内部使用

网络号-子网号-主机号

子网对应子网掩码 ，目地是让人知道网络号和主机号是多少





# 第十一讲

### 子网掩码的概念

只有连续的1和连续的0，所以也可以写成点分十进制

  ![](http://p94dvrayw.bkt.clouddn.com/18-6-27/634018.jpg)

标准B类地址16位网络号，如需分出64个子网，那么就可以借用原16位主机号的6位（2的6次方是64所以借6位），这样主机号就变成了10位，子网掩码就变成11111111.11111111.11111100.00000000 写作255.255.252.0  因为有22个1，也可写作/22

### 二进制十进制转换

| 128  |  64  |  32  |  16  |  8   |  4   |  2   |  1   |
| :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: |
|  1   |  1   |  1   |  0   |  0   |  0   |  0   |  0   |

如上图，11100000转换成十进制就是128+64+32=224

十进制转换成二进制就是减，先减去128 能减就给1然后再减64，，，，

例如：192转换，11000000



# 第十二讲（重点）

### ip地址规划

![](http://p94dvrayw.bkt.clouddn.com/18-6-28/91717519.jpg)

![](http://p94dvrayw.bkt.clouddn.com/18-6-28/92725744.jpg)

![](http://p94dvrayw.bkt.clouddn.com/18-6-28/87951965.jpg)

![](http://p94dvrayw.bkt.clouddn.com/18-6-28/67409488.jpg)

![](http://p94dvrayw.bkt.clouddn.com/18-6-28/22945940.jpg)

![](http://p94dvrayw.bkt.clouddn.com/18-6-28/1940604.jpg)

![](http://p94dvrayw.bkt.clouddn.com/18-6-28/55126153.jpg)



![](http://p94dvrayw.bkt.clouddn.com/18-6-28/61090772.jpg)

![](http://p94dvrayw.bkt.clouddn.com/18-6-28/60104625.jpg)

![](http://p94dvrayw.bkt.clouddn.com/18-6-28/41530243.jpg)



### VLSM 可变长度子网掩码（必出）

variable length subnet mask 

在标准掩码上面再划分的子网的网络号码，

无类路由选择网络可以使用VLSM

有类路由选择网络不能使用VLSM

![](http://p94dvrayw.bkt.clouddn.com/18-6-29/90390145.jpg)

![](http://p94dvrayw.bkt.clouddn.com/18-6-29/99114237.jpg)

![](http://p94dvrayw.bkt.clouddn.com/18-6-29/7485420.jpg)

![](http://p94dvrayw.bkt.clouddn.com/18-6-29/50425134.jpg)

![](http://p94dvrayw.bkt.clouddn.com/18-6-29/80288408.jpg)

233错了 应该是31



### 无类域间路由

CIDR

将剩余的ip地址不是按照标准的地址分类规则分配，而是按可变大小的块方法进行分配

特点：

![](http://p94dvrayw.bkt.clouddn.com/18-6-29/80475795.jpg)

![](http://p94dvrayw.bkt.clouddn.com/18-6-29/85936472.jpg)



# 第十四讲

![](http://p94dvrayw.bkt.clouddn.com/18-6-29/60909428.jpg)

实训CIDR

![](http://p94dvrayw.bkt.clouddn.com/18-6-29/3391512.jpg)

![](http://p94dvrayw.bkt.clouddn.com/18-6-29/86251915.jpg)

![](http://p94dvrayw.bkt.clouddn.com/18-6-29/76946830.jpg)



### 必会计算题

![](http://p94dvrayw.bkt.clouddn.com/18-6-29/76883992.jpg)

算算还会么

![](http://p94dvrayw.bkt.clouddn.com/18-6-29/63686638.jpg)



![](http://p94dvrayw.bkt.clouddn.com/18-6-29/11226283.jpg)

![](http://p94dvrayw.bkt.clouddn.com/18-6-29/25660911.jpg)

见可分配 就是2的多少次方-2 也就排除了bd

最后一题解析：

1 看三块地址块最后的不同，转换成二进制

2写下来

​	00000000

​	00100000

​	01000000

3 找出相同前缀，到第25位都是一样的

4 所以/25 主机数量就是7位 所以可分配地址2的7次方-2



# 第十五 十六讲
### 专用地址

| 类别 | 10.0.0.0-10.255.255.255 |
| ---- | ----------------------- |
| A类  | 10.0.0.0-10.255.255.255 |
| B类  | 172.16-172.31           |
| C类  | 192.168.0-192.168.255   |

### 网络地址转换NAT的基本工作原理

思想:由内到外，源地址（专用地址）转换成共有地址；

​	由外到内，目地地址（公有地址）转换成专用地址；

以上均包含端口号 的转换

类型：

​	·静态NAT 一对一

​	·动态NAT 一对多

​	·网络地址端口转换NAPT 一对多，端口区分



### 转换关系（必会）



![](http://p94dvrayw.bkt.clouddn.com/18-7-2/69580089.jpg)



### ipv6 地址

ipv6长度128位 

冒号十六进制，八段

压缩0：有连续的0可以用双冒号表示，但只能使用一次，前导0可以压缩

![](http://p94dvrayw.bkt.clouddn.com/18-7-2/97683745.jpg)



前导0可以压缩

![](http://p94dvrayw.bkt.clouddn.com/18-7-2/64795781.jpg)

没有子网掩码

有前缀长度表示法![](http://p94dvrayw.bkt.clouddn.com/18-7-2/10671720.jpg)

前48是前缀 后128-48是主机位



# 第十七讲

## 第四章 路由设计基础

重点 

```javascript
BGP 
RIP
OSPF 
IP路由选择与路由汇聚
```



路由器采用**表驱动**的路由选择算法

### 路由选择与路由汇聚

ip分组的路由在使用CIDR协议后，通过子网的划分相反过程来汇聚。路由表的项目由网络前缀和下一条地址两项内容组成，因此，选择路由应当从匹配结果中选择具有最长网络前缀的路由，这就是最长前缀匹配原则。

![](http://p94dvrayw.bkt.clouddn.com/18-7-3/51382379.jpg)

156.26. 00111000

156.26. 00111001

156.26. 00111010

156.26. 00111011

所以156.26.56.0 /22

# 第十八讲

### 内部网关协议

IGP interior gateway protocol

自制系统as内部使用的路由协议，主要有

- 路由信息协议RIP routing information protocol

  - 跳数一般小于15

  - 路由周期性向外发送路由刷新报文，由（V，D）组成的表。v矢量标识该路由器可到达的信宿，网关或主机 d距离指路由器去往信宿v的距离，其他路由收到报文后，据此按最短路径对各自路由表进行刷新

  - 路由器刚启动，对vd表初始化，与直连路由距离为0.从别处学习来的距离要加1，加1后比以前的短，就学习 ，比以前的长就抛弃如下图（会计算）![](http://p94dvrayw.bkt.clouddn.com/18-7-3/4760042.jpg)

    

- 开放最短路径优先协议OSPF  open shortest path first

  - 公开发布标准开放协议
  - 使用分布式链路状态
  - 状态度量主要指费用、距离、延时、宽带，不像RIP只看跳数
  - 链路状态发生变化时，泛洪向本区域所有路由器发送信息
  - 所有OSPF路由器交换链路状态信息，最终建立一个**链路状态数据库**，实际是**全网拓扑结构图**
  - 可将as再划分更小的若干个范围，叫区域area 每个区域有一个**32位区域标识符** ，一个区域路由器数**不超过200**
  - 划分区域好处是用泛洪范围局限在每一个区域而**不是整个自治系统**，因此每一个区域内部路由器**只知道该区域内的完整拓扑结构** 减少更新量
  - OSPF使用层次结构的区域划分，将一个自治系统划分成**若干区域和一个主干区域**

### 外部网关协议

EGP external gateway protocol

自制系统之间使用的路由选择协议，有

- ***边界网关协议BGP border gateway protocol***重要
  - **不同自治系统** 的路由器之间交换路由信息的协议
  - BGP-4采用 **路由向量** 路由协议。每个自治系统至少选一个路由器做为**发言人**，发言人间交换路由信息要先建立TCP连接
  - 初始化：每个路由器要交换整个路由表，以后只需要在发生变化时更新有变化的部分
  - BGP协议的四种分组：
  - 1、打开分组 open：与另一个发言人建立关系
  - 2、更新分组 updata：更新（核心部分）
  - 3、保活分组 keepalive：确认打开分组，以及周期证实相邻边界路由器存在（30s）
  - 4、通知分组 notification：发送检测到的差错



 

